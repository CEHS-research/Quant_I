[
["preparing-datasets.html", "Chapter 1 Preparing Datasets 1.1 Load Needed Packages 1.2 Read in the Data from Excel and store the data as data 1.3 Setting variables to factors and labeling values 1.4 Creating new variables 1.5 Putting it all together", " Chapter 1 Preparing Datasets 1.1 Load Needed Packages You will need TWO packages: tidyverse Easily Install and Load the ‘Tidyverse’ readxl Read Excel Files library(tidyverse) library(readxl) 1.2 Read in the Data from Excel and store the data as data data &lt;- read_excel(&quot;Ihno_dataset.xls&quot;) Print out the dataset data #data NOTE: The pound or hashtag symbol at the front of a line within an R code chunk designates what follows as a comment and does not try to run the code. List out the variable names # variables names names(data) [1] &quot;Sub_num&quot; &quot;Gender&quot; &quot;Major&quot; &quot;Reason&quot; &quot;Exp_cond&quot; &quot;Coffee&quot; [7] &quot;Num_cups&quot; &quot;Phobia&quot; &quot;Prevmath&quot; &quot;Mathquiz&quot; &quot;Statquiz&quot; &quot;Exp_sqz&quot; [13] &quot;Hr_base&quot; &quot;Hr_pre&quot; &quot;Hr_post&quot; &quot;Anx_base&quot; &quot;Anx_pre&quot; &quot;Anx_post&quot; How many row (participants) and columns (variables) # data frame&#39;s dimentions dim(data) [1] 100 18 1.3 Setting variables to factors and labeling values dataF &lt;- data %&gt;% dplyr::mutate(GenderF = Gender %&gt;% factor(levels = c(1, 2), labels = c(&quot;Female&quot;, &quot;Male&quot;))) %&gt;% dplyr::mutate(MajorF = Major %&gt;% factor(levels = c(1, 2, 3, 4,5), labels = c(&quot;Psychology&quot;, &quot;Premed&quot;, &quot;Biology&quot;, &quot;Sociology&quot;, &quot;Economics&quot;))) %&gt;% dplyr::mutate(ReasonF = Reason %&gt;% factor(levels = c(1, 2, 3), labels = c(&quot;Program requirement&quot;, &quot;Personal interest&quot;, &quot;Advisor recommendation&quot;))) %&gt;% dplyr::mutate(Exp_condF = Exp_cond %&gt;% factor(levels = c(1, 2, 3, 4), labels = c(&quot;Easy&quot;, &quot;Moderate&quot;, &quot;Difficult&quot;, &quot;Impossible&quot;))) %&gt;% dplyr::mutate(CoffeeF = Coffee %&gt;% factor(levels = c(0, 1), labels = c(&quot;Not a regular coffee drinker&quot;, &quot;Regularly drinks coffee&quot;))) glimpse(data) Observations: 100 Variables: 18 $ Sub_num &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16... $ Gender &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,... $ Major &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,... $ Reason &lt;dbl&gt; 3, 2, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1,... $ Exp_cond &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 4, 4, 4,... $ Coffee &lt;dbl&gt; 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1,... $ Num_cups &lt;dbl&gt; 0, 0, 0, 0, 1, 1, 0, 2, 0, 2, 1, 0, 1, 2, 3, 0, 0, 3,... $ Phobia &lt;dbl&gt; 1, 1, 4, 4, 10, 4, 4, 4, 4, 5, 5, 4, 7, 4, 3, 8, 4, 5... $ Prevmath &lt;dbl&gt; 3, 4, 1, 0, 1, 1, 2, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1,... $ Mathquiz &lt;dbl&gt; 43, 49, 26, 29, 31, 20, 13, 23, 38, NA, 29, 32, 18, N... $ Statquiz &lt;dbl&gt; 6, 9, 8, 7, 6, 7, 3, 7, 8, 7, 8, 8, 1, 5, 8, 3, 8, 7,... $ Exp_sqz &lt;dbl&gt; 7, 11, 8, 8, 6, 6, 4, 7, 7, 6, 10, 7, 3, 4, 6, 1, 7, ... $ Hr_base &lt;dbl&gt; 71, 73, 69, 72, 71, 70, 71, 77, 73, 78, 74, 73, 73, 7... $ Hr_pre &lt;dbl&gt; 68, 75, 76, 73, 83, 71, 70, 87, 72, 76, 72, 74, 76, 8... $ Hr_post &lt;dbl&gt; 65, 68, 72, 78, 74, 76, 66, 84, 67, 74, 73, 74, 78, 7... $ Anx_base &lt;dbl&gt; 17, 17, 19, 19, 26, 12, 12, 17, 20, 20, 21, 32, 19, 1... $ Anx_pre &lt;dbl&gt; 22, 19, 14, 13, 30, 15, 16, 19, 14, 24, 25, 35, 23, 2... $ Anx_post &lt;dbl&gt; 20, 16, 15, 16, 25, 19, 17, 22, 17, 19, 22, 33, 20, 2... glimpse(dataF) Observations: 100 Variables: 23 $ Sub_num &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1... $ Gender &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1... $ Major &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1... $ Reason &lt;dbl&gt; 3, 2, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1... $ Exp_cond &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 4, 4, 4... $ Coffee &lt;dbl&gt; 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1... $ Num_cups &lt;dbl&gt; 0, 0, 0, 0, 1, 1, 0, 2, 0, 2, 1, 0, 1, 2, 3, 0, 0, 3... $ Phobia &lt;dbl&gt; 1, 1, 4, 4, 10, 4, 4, 4, 4, 5, 5, 4, 7, 4, 3, 8, 4, ... $ Prevmath &lt;dbl&gt; 3, 4, 1, 0, 1, 1, 2, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1... $ Mathquiz &lt;dbl&gt; 43, 49, 26, 29, 31, 20, 13, 23, 38, NA, 29, 32, 18, ... $ Statquiz &lt;dbl&gt; 6, 9, 8, 7, 6, 7, 3, 7, 8, 7, 8, 8, 1, 5, 8, 3, 8, 7... $ Exp_sqz &lt;dbl&gt; 7, 11, 8, 8, 6, 6, 4, 7, 7, 6, 10, 7, 3, 4, 6, 1, 7,... $ Hr_base &lt;dbl&gt; 71, 73, 69, 72, 71, 70, 71, 77, 73, 78, 74, 73, 73, ... $ Hr_pre &lt;dbl&gt; 68, 75, 76, 73, 83, 71, 70, 87, 72, 76, 72, 74, 76, ... $ Hr_post &lt;dbl&gt; 65, 68, 72, 78, 74, 76, 66, 84, 67, 74, 73, 74, 78, ... $ Anx_base &lt;dbl&gt; 17, 17, 19, 19, 26, 12, 12, 17, 20, 20, 21, 32, 19, ... $ Anx_pre &lt;dbl&gt; 22, 19, 14, 13, 30, 15, 16, 19, 14, 24, 25, 35, 23, ... $ Anx_post &lt;dbl&gt; 20, 16, 15, 16, 25, 19, 17, 22, 17, 19, 22, 33, 20, ... $ GenderF &lt;fctr&gt; Female, Female, Female, Female, Female, Female, Fem... $ MajorF &lt;fctr&gt; Psychology, Psychology, Psychology, Psychology, Psy... $ ReasonF &lt;fctr&gt; Advisor recommendation, Personal interest, Program ... $ Exp_condF &lt;fctr&gt; Easy, Easy, Easy, Easy, Easy, Moderate, Moderate, M... $ CoffeeF &lt;fctr&gt; Regularly drinks coffee, Not a regular coffee drink... 1.4 Creating new variables 1.4.1 Question 2: Create a new variable = mathquiz + 50 data2 &lt;- dataF %&gt;% dplyr::mutate(Mathquiz_p50 = Mathquiz + 50) data2 %&gt;% dplyr::select(Sub_num, Mathquiz, Mathquiz_p50) %&gt;% head() # A tibble: 6 x 3 Sub_num Mathquiz Mathquiz_p50 &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 43.0 93.0 2 2.00 49.0 99.0 3 3.00 26.0 76.0 4 4.00 29.0 79.0 5 5.00 31.0 81.0 6 6.00 20.0 70.0 1.4.2 Question 3: Create a new variable = Hr_base / 60 data3 &lt;- data2 %&gt;% dplyr::mutate(Hr_base_bpm = Hr_base / 60) data3 %&gt;% dplyr::select(Sub_num, Hr_base, Hr_base_bpm) %&gt;% head(n = 10) # A tibble: 10 x 3 Sub_num Hr_base Hr_base_bpm &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 71.0 1.18 2 2.00 73.0 1.22 3 3.00 69.0 1.15 4 4.00 72.0 1.20 5 5.00 71.0 1.18 6 6.00 70.0 1.17 7 7.00 71.0 1.18 8 8.00 77.0 1.28 9 9.00 73.0 1.22 10 10.0 78.0 1.30 1.4.3 Question 4a: Create a new variable = Statquiz + 2, then * 10 data4a &lt;- data3 %&gt;% dplyr::mutate(Statquiz_4a = (Statquiz + 2) * 10 ) 1.4.4 Question 4b: Create a new variable = Statquiz * 10, then + 2 data4b &lt;- data4a %&gt;% dplyr::mutate(Statquiz_4b = (Statquiz * 10) + 2 ) data4b %&gt;% dplyr::select(Sub_num, Statquiz, Statquiz_4a, Statquiz_4b) %&gt;% head() # A tibble: 6 x 4 Sub_num Statquiz Statquiz_4a Statquiz_4b &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 6.00 80.0 62.0 2 2.00 9.00 110 92.0 3 3.00 8.00 100 82.0 4 4.00 7.00 90.0 72.0 5 5.00 6.00 80.0 62.0 6 6.00 7.00 90.0 72.0 1.4.5 Question 5a: Create a new variable = sum of the 3 anxiety measures data5a &lt;- data4b %&gt;% dplyr::mutate(Anx_plus = Anx_base + Anx_pre + Anx_post) %&gt;% dplyr::mutate(Anx_sum1 = sum(Anx_base, Anx_pre, Anx_post)) %&gt;% dplyr::rowwise() %&gt;% dplyr::mutate(Anx_sum = sum(c(Anx_base, Anx_pre, Anx_post))) %&gt;% dplyr::ungroup() data5a %&gt;% dplyr::select(Sub_num, Anx_base, Anx_pre, Anx_post, Anx_plus, Anx_sum1, Anx_sum) %&gt;% head() # A tibble: 6 x 7 Sub_num Anx_base Anx_pre Anx_post Anx_plus Anx_sum1 Anx_sum &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 17.0 22.0 20.0 59.0 5741 59.0 2 2.00 17.0 19.0 16.0 52.0 5741 52.0 3 3.00 19.0 14.0 15.0 48.0 5741 48.0 4 4.00 19.0 13.0 16.0 48.0 5741 48.0 5 5.00 26.0 30.0 25.0 81.0 5741 81.0 6 6.00 12.0 15.0 19.0 46.0 5741 46.0 1.4.6 Question 5b: Create a new variable = average of the 3 heart rates data5b &lt;- data5a %&gt;% dplyr::mutate(Hr_avg = (Hr_base + Hr_pre + Hr_post)/3) %&gt;% # dplyr::mutate(Hr_mean1 = mean(Hr_base, Hr_pre, Hr_post, na.rm = TRUE)) %&gt;% dplyr::rowwise() %&gt;% dplyr::mutate(Hr_mean = mean(c(Hr_base, Hr_pre, Hr_post))) %&gt;% dplyr::ungroup() data5b %&gt;% dplyr::select(Sub_num, Hr_base, Hr_pre, Hr_post, Hr_avg, Hr_mean) %&gt;% head() # A tibble: 6 x 6 Sub_num Hr_base Hr_pre Hr_post Hr_avg Hr_mean &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 71.0 68.0 65.0 68.0 68.0 2 2.00 73.0 75.0 68.0 72.0 72.0 3 3.00 69.0 76.0 72.0 72.3 72.3 4 4.00 72.0 73.0 78.0 74.3 74.3 5 5.00 71.0 83.0 74.0 76.0 76.0 6 6.00 70.0 71.0 76.0 72.3 72.3 1.4.7 Question 6: Create a new variable = Statquiz minus Exp_sqz data6 &lt;- data5b %&gt;% dplyr::mutate(StatDiff = Statquiz - Exp_sqz) data6 %&gt;% dplyr::select(Sub_num, Exp_cond, Exp_cond, Statquiz, Exp_sqz, StatDiff) %&gt;% head() # A tibble: 6 x 5 Sub_num Exp_cond Statquiz Exp_sqz StatDiff &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 1.00 1.00 6.00 7.00 -1.00 2 2.00 1.00 9.00 11.0 -2.00 3 3.00 1.00 8.00 8.00 0 4 4.00 1.00 7.00 8.00 -1.00 5 5.00 1.00 6.00 6.00 0 6 6.00 2.00 7.00 6.00 1.00 1.5 Putting it all together data_clean &lt;- read_excel(&quot;Ihno_dataset.xls&quot;) %&gt;% dplyr::mutate(GenderF = Gender %&gt;% factor(levels = c(1, 2), labels = c(&quot;Female&quot;, &quot;Male&quot;))) %&gt;% dplyr::mutate(MajorF = Major %&gt;% factor(levels = c(1, 2, 3, 4,5), labels = c(&quot;Psychology&quot;, &quot;Premed&quot;, &quot;Biology&quot;, &quot;Sociology&quot;, &quot;Economics&quot;))) %&gt;% dplyr::mutate(ReasonF = Reason %&gt;% factor(levels = c(1, 2, 3), labels = c(&quot;Program requirement&quot;, &quot;Personal interest&quot;, &quot;Advisor recommendation&quot;))) %&gt;% dplyr::mutate(Exp_condF = Exp_cond %&gt;% factor(levels = c(1, 2, 3, 4), labels = c(&quot;Easy&quot;, &quot;Moderate&quot;, &quot;Difficult&quot;, &quot;Impossible&quot;))) %&gt;% dplyr::mutate(CoffeeF = Coffee %&gt;% factor(levels = c(0, 1), labels = c(&quot;Not a regular coffee drinker&quot;, &quot;Regularly drinks coffee&quot;))) %&gt;% dplyr::mutate(Mathquiz_p50 = Mathquiz + 50) %&gt;% dplyr::mutate(Hr_base_bpm = Hr_base / 60) %&gt;% dplyr::mutate(Statquiz_4a = (Statquiz + 2) * 10 ) %&gt;% dplyr::mutate(Statquiz_4b = (Statquiz * 10) + 2 ) %&gt;% dplyr::rowwise() %&gt;% dplyr::mutate(Anx_sum = sum(c(Anx_base, Anx_pre, Anx_post), na.rm = TRUE)) %&gt;% dplyr::mutate(Hr_mean = mean(c(Hr_base, Hr_pre, Hr_post), na.rm = TRUE)) %&gt;% dplyr::ungroup() %&gt;% dplyr::mutate(StatDiff = Statquiz - Exp_sqz) "]
]
